uploader=function(){};uploader.prototype.setAttributes=function(e,t){for(var n in t){e.setAttribute(n,t[n])}};uploader.prototype.createFrame=function(e){var t=document.createElement("iframe");this.setAttributes(t,{name:e,style:"display:none;"});return t};uploader.prototype.createFileInput=function(){var e=document.createElement("input");this.setAttributes(e,{name:"file[]",type:"file",multiple:true});return e};uploader.prototype.createForm=function(e,t){var n=document.createElement("form");this.setAttributes(n,{action:t,method:"POST",enctype:"multipart/form-data",target:e});return n};uploader.prototype.createSubmitButton=function(){var e=document.createElement("input");e.type="submit";return e};uploader.prototype.setUploader=function(e,t,n,r,i){var s=typeof n==="function"?n:function(){};var o=typeof r==="function"?r:function(){};var u=typeof i==="function"?i:function(){};var a=(new Date).getTime().toString(16);var f=this.createFrame(a);var l=this.createFileInput();var c=this.createSubmitButton();var h=this.createForm(a,t);h.appendChild(l).appendChild(c);f.appendChild(h);e.appendChild(f);e.addEventListener("click",function(){l.click()},true);l.addEventListener("change",function(){s();h.submit()},true);f.addEventListener("load",function(){l.value="";var e="";try{e=this.contentWindow.document.body.innerHTML}catch(t){u(t)}o([e])},true)};createUploader=function(e){e.elementId=document.getElementById(e.elementId);if(e.elementId==="undefined")throw"Element not found!";if(e.url==="undefined"||e.url=="")throw"Url is not valid!";var t=new uploader;t.setUploader(e.elementId,e.url,e.onBeforeSend,e.onComplete,e.onError)}